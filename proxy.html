<!DOCTYPE html>
<html lang="cs"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Program akcí</title>
<meta name="color-scheme" content="light">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#fff6f2; --card:#fff; --text:#202225; --muted:#555; --chip:#f5f6fa; --divider:#e8e8ee;
  --rail:56px;
}
*{box-sizing:border-box}
body{ margin:0;padding:16px;background:linear-gradient(180deg,var(--bg),#fff0ec);
      color:var(--text);font:16px/1.7 "Inter",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu }
.wrapper{max-width:980px;margin:0 auto}
.grid{display:grid;gap:16px;grid-template-columns:1fr}

/* karta + kolejnice */
.card{
  position:relative;
  display:flex; gap:18px; align-items:stretch;
  background:var(--card); border-radius:16px; padding:18px;
  padding-left:calc(18px + var(--rail));
  box-shadow:0 6px 24px rgba(0,0,0,.08);
  transition: transform .15s ease, box-shadow .2s ease;
}
.card::before{ content:""; position:absolute; left:0; top:0; bottom:0; width:var(--rail);
  background:var(--bar,#f4a261); border-radius:16px 0 0 16px; }
.card::after{ content:attr(data-calendar); position:absolute; left:0; top:0; bottom:0; width:var(--rail);
  display:flex; align-items:center; justify-content:center; writing-mode:vertical-rl; text-orientation:mixed;
  color:#fff; font-weight:700; letter-spacing:.3px; padding:8px 0; text-align:center; overflow:hidden; opacity:.95; }
.card:hover{ transform:translateY(-2px); box-shadow:0 10px 30px rgba(0,0,0,.12); }

/* plakát */
.media{ flex:0 0 340px; max-width:340px; align-self:flex-start; }
.poster-wrap{ background:#fff; border-radius:12px; overflow:hidden; border:1px solid rgba(0,0,0,.06);
              box-shadow:0 4px 12px rgba(0,0,0,.06); cursor: zoom-in; }
.poster{ display:block; width:100%; height:auto; max-height:640px; transition:.3s transform,.3s filter; }
.card:hover .poster{ transform:scale(1.03); filter:brightness(1.05); }

/* pravý sloupec */
.body{flex:1; min-width:0; display:flex; flex-direction:column;}

/* META: jednořádkové rozložení – vlevo místo, vpravo datum+čas */
.meta{ display:flex; align-items:center; gap:10px; padding:10px 0; border-bottom:1px solid var(--divider); flex-wrap:wrap; }
.meta-left{ display:flex; align-items:center; gap:10px; min-width:180px; }
.meta-right{ display:flex; align-items:center; gap:8px; margin-left:auto; }
.badge{ display:inline-block; background:var(--chip); color:#3d4051; border-radius:6px; padding:4px 10px; font-size:14px; font-weight:600; }
.meta .item{ color:var(--muted); font-size:15px; }

/* TITULEK a POPIS – bez čar */
.title{ margin:0; padding:12px 0 6px; font-size:26px; line-height:1.25; font-weight:700; }
.desc{ color:#2a2d3a; font-size:17px; padding:6px 0 12px; }

/* tlačítka – čára jen tady */
.actions{ margin-top:auto; display:flex; flex-wrap:wrap; gap:10px; justify-content:center; width:100%;
          border-top:1px solid var(--divider); padding-top:12px; }
.btn{ display:inline-flex; align-items:center; gap:8px; border:1px solid rgba(0,0,0,.1); background:#fff;
      padding:8px 12px; border-radius:10px; font-weight:600; font-size:14px; box-shadow:0 2px 8px rgba(0,0,0,.04);
      cursor:pointer; text-decoration:none; color:#1a1f36; }
.btn:hover{ box-shadow:0 6px 18px rgba(0,0,0,.10) }
.btn .ico{ font-size:16px }

/* barvy podle kalendáře */
.card[data-calendar*="KD"]{ --bar:#e76f51; }
.card[data-calendar*="Hamr"]{ --bar:#2a9d8f; }
.card[data-calendar*="Taneční"]{ --bar:#e9c46a; }
.card[data-calendar*="Sviny"]{ --bar:#264653; }

/* responsive */
@media (max-width:740px){
  .card{ flex-direction:column; --rail:42px; }
  .card::after{ font-size:12px; }
  .media{ flex:unset; max-width:100% }
}

a{color:#0b69d7; text-decoration:none} a:hover{text-decoration:underline}
</style>
<script type="application/ld+json">
[
{
  "@context": "https://schema.org",
  "@type": "Event",
  "name": "ZŠ - natáčení",
  "startDate": "2025-10-20T12:00:00+02:00",
  "endDate": "2025-10-20T13:00:00+02:00",
  "description": "Koncert hudebního uskupení Žestě dvěstě."
}
{
  "@context": "https://schema.org",
  "@type": "Event",
  "name": "Zastupitelstvo",
  "startDate": "2025-11-17T17:00:00+01:00",
  "endDate": "2025-11-17T19:00:00+01:00",
  "description": ""
}
{
  "@context": "https://schema.org",
  "@type": "Event",
  "name": "Od hospody k hospodě V",
  "startDate": "2025-12-11T18:00:00+01:00",
  "endDate": "2025-12-11T20:00:00+01:00",
  "description": "cca 25 lidí",
  "location": {
    "@type": "Place",
    "name": "Sál KD"
  }
}
{
  "@context": "https://schema.org",
  "@type": "Event",
  "name": "ZŠ - předávání vysvědčení",
  "startDate": "2026-06-29T17:00:00+02:00",
  "endDate": "2026-06-29T19:00:00+02:00",
  "description": ""
}
{
  "@context": "https://schema.org",
  "@type": "Event",
  "name": "Pódium Nežetice",
  "startDate": "2026-07-18",
  "endDate": "2026-07-18",
  "description": "",
  "location": {
    "@type": "Place",
    "name": "Nežetice"
  }
}
]
</script>
</head>
<body>
  <div class="wrapper">
    <div class="grid" id="grid"><article class="card" data-calendar="Kulturní dům">
    <div class="media"><div class="poster-wrap"><img class="poster" loading="lazy" decoding="async" src="/img/2025-10-20-zs-nataceni.png" alt=""></div></div>
    <div class="body">
      
    <div class="meta">
      <div class="meta-left">
        
      </div>
      <div class="meta-right">
        <span class="badge">📅 20.10.2025</span>
        <span class="badge">⏰ 12:00 – 13:00</span>
      </div>
    </div>
      <h2 class="title">ZŠ - natáčení</h2>
      <div class="desc">Koncert hudebního uskupení Žestě dvěstě.</div>
      
    <div class="actions">
      <a class="btn" href="https://calendar.google.com/calendar/render?action=TEMPLATE&amp;text=Z%C5%A0%20-%20nat%C3%A1%C4%8Den%C3%AD&amp;dates=20251020T100000Z/20251020T110000Z&amp;details=Koncert%20hudebn%C3%ADho%20uskupen%C3%AD%20%C5%BDest%C4%9B%20dv%C4%9Bst%C4%9B.&amp;location=&amp;sf=true&amp;output=xml" target="_blank" rel="noopener">
        <span class="ico">🗓️</span> Přidat do Google kalendáře
      </a>
      <a class="btn" href="data:text/calendar;charset=utf-8,BEGIN%3AVCALENDAR%0D%0AVERSION%3A2.0%0D%0APRODID%3A-%2F%2FMKS%20Events%2F%2FCZ%0D%0ACALSCALE%3AGREGORIAN%0D%0AMETHOD%3APUBLISH%0D%0ABEGIN%3AVEVENT%0D%0AUID%3Akc8Kpw3aKDYMJZ5YaK1%2FXQOe%40mks-events%0D%0ADTSTAMP%3A20251014T114135Z%0D%0ASUMMARY%3AZ%C5%A0%20-%20nat%C3%A1%C4%8Den%C3%AD%0D%0ADTSTART%3A20251020T100000Z%0D%0ADTEND%3A20251020T110000Z%0D%0ADESCRIPTION%3AKoncert%20hudebn%C3%ADho%20uskupen%C3%AD%20%C5%BDest%C4%9B%20dv%C4%9Bst%C4%9B.%0D%0AEND%3AVEVENT%0D%0AEND%3AVCALENDAR%0D%0A" download="2025-10-20-zs-nataceni.ics">
        <span class="ico">🍎</span> Přidat do Apple kalendáře
      </a>
    </div>
    </div>
  </article><article class="card" data-calendar="Taneční sál">
    <div class="media"><div class="poster-wrap"><img class="poster" loading="lazy" decoding="async" src="/img/2025-11-17-zastupitelstvo.jpg" alt=""></div></div>
    <div class="body">
      
    <div class="meta">
      <div class="meta-left">
        
      </div>
      <div class="meta-right">
        <span class="badge">📅 17.11.2025</span>
        <span class="badge">⏰ 17:00 – 19:00</span>
      </div>
    </div>
      <h2 class="title">Zastupitelstvo</h2>
      
      
    <div class="actions">
      <a class="btn" href="https://calendar.google.com/calendar/render?action=TEMPLATE&amp;text=Zastupitelstvo&amp;dates=20251117T160000Z/20251117T180000Z&amp;details=&amp;location=&amp;sf=true&amp;output=xml" target="_blank" rel="noopener">
        <span class="ico">🗓️</span> Přidat do Google kalendáře
      </a>
      <a class="btn" href="data:text/calendar;charset=utf-8,BEGIN%3AVCALENDAR%0D%0AVERSION%3A2.0%0D%0APRODID%3A-%2F%2FMKS%20Events%2F%2FCZ%0D%0ACALSCALE%3AGREGORIAN%0D%0AMETHOD%3APUBLISH%0D%0ABEGIN%3AVEVENT%0D%0AUID%3AoWAXio78qQ2BSoc5t3X1dePn%40mks-events%0D%0ADTSTAMP%3A20251014T114135Z%0D%0ASUMMARY%3AZastupitelstvo%0D%0ADTSTART%3A20251117T160000Z%0D%0ADTEND%3A20251117T180000Z%0D%0AEND%3AVEVENT%0D%0AEND%3AVCALENDAR%0D%0A" download="2025-11-17-zastupitelstvo.ics">
        <span class="ico">🍎</span> Přidat do Apple kalendáře
      </a>
    </div>
    </div>
  </article><article class="card" data-calendar="Taneční sál">
    <div class="media"><div class="poster-wrap"><img class="poster" loading="lazy" decoding="async" src="/img/2025-12-11-od-hospody-k-hospode-v.png" alt=""></div></div>
    <div class="body">
      
    <div class="meta">
      <div class="meta-left">
        <span class="item">📍 Sál KD</span>
      </div>
      <div class="meta-right">
        <span class="badge">📅 11.12.2025</span>
        <span class="badge">⏰ 18:00 – 20:00</span>
      </div>
    </div>
      <h2 class="title">Od hospody k hospodě V</h2>
      <div class="desc">cca 25 lidí</div>
      
    <div class="actions">
      <a class="btn" href="https://calendar.google.com/calendar/render?action=TEMPLATE&amp;text=Od%20hospody%20k%20hospod%C4%9B%20V&amp;dates=20251211T170000Z/20251211T190000Z&amp;details=cca%2025%20lid%C3%AD&amp;location=S%C3%A1l%20KD&amp;sf=true&amp;output=xml" target="_blank" rel="noopener">
        <span class="ico">🗓️</span> Přidat do Google kalendáře
      </a>
      <a class="btn" href="data:text/calendar;charset=utf-8,BEGIN%3AVCALENDAR%0D%0AVERSION%3A2.0%0D%0APRODID%3A-%2F%2FMKS%20Events%2F%2FCZ%0D%0ACALSCALE%3AGREGORIAN%0D%0AMETHOD%3APUBLISH%0D%0ABEGIN%3AVEVENT%0D%0AUID%3A%2FWXLxwf%2BNqKQOQesUgTIh%2Bp6%40mks-events%0D%0ADTSTAMP%3A20251014T114135Z%0D%0ASUMMARY%3AOd%20hospody%20k%20hospod%C4%9B%20V%0D%0ADTSTART%3A20251211T170000Z%0D%0ADTEND%3A20251211T190000Z%0D%0ALOCATION%3AS%C3%A1l%20KD%0D%0ADESCRIPTION%3Acca%2025%20lid%C3%AD%0D%0AEND%3AVEVENT%0D%0AEND%3AVCALENDAR%0D%0A" download="2025-12-11-od-hospody-k-hospode-v.ics">
        <span class="ico">🍎</span> Přidat do Apple kalendáře
      </a>
    </div>
    </div>
  </article><article class="card" data-calendar="Taneční sál">
    <div class="media"><div class="poster-wrap"><img class="poster" loading="lazy" decoding="async" src="/img/2026-06-29-zs-predavani-vysvedceni.png" alt=""></div></div>
    <div class="body">
      
    <div class="meta">
      <div class="meta-left">
        
      </div>
      <div class="meta-right">
        <span class="badge">📅 29.6.2026</span>
        <span class="badge">⏰ 17:00 – 19:00</span>
      </div>
    </div>
      <h2 class="title">ZŠ - předávání vysvědčení</h2>
      
      
    <div class="actions">
      <a class="btn" href="https://calendar.google.com/calendar/render?action=TEMPLATE&amp;text=Z%C5%A0%20-%20p%C5%99ed%C3%A1v%C3%A1n%C3%AD%20vysv%C4%9Bd%C4%8Den%C3%AD&amp;dates=20260629T150000Z/20260629T170000Z&amp;details=&amp;location=&amp;sf=true&amp;output=xml" target="_blank" rel="noopener">
        <span class="ico">🗓️</span> Přidat do Google kalendáře
      </a>
      <a class="btn" href="data:text/calendar;charset=utf-8,BEGIN%3AVCALENDAR%0D%0AVERSION%3A2.0%0D%0APRODID%3A-%2F%2FMKS%20Events%2F%2FCZ%0D%0ACALSCALE%3AGREGORIAN%0D%0AMETHOD%3APUBLISH%0D%0ABEGIN%3AVEVENT%0D%0AUID%3Ayy0A2g1RyZzRGtYJEJ1QamF%2F%40mks-events%0D%0ADTSTAMP%3A20251014T114133Z%0D%0ASUMMARY%3AZ%C5%A0%20-%20p%C5%99ed%C3%A1v%C3%A1n%C3%AD%20vysv%C4%9Bd%C4%8Den%C3%AD%0D%0ADTSTART%3A20260629T150000Z%0D%0ADTEND%3A20260629T170000Z%0D%0AEND%3AVEVENT%0D%0AEND%3AVCALENDAR%0D%0A" download="2026-06-29-zs-predavani-vysvedceni.ics">
        <span class="ico">🍎</span> Přidat do Apple kalendáře
      </a>
    </div>
    </div>
  </article><article class="card" data-calendar="Trhové Sviny a okolí">
    
    <div class="body">
      
    <div class="meta">
      <div class="meta-left">
        <span class="item">📍 Nežetice</span>
      </div>
      <div class="meta-right">
        <span class="badge">📅 18.7.2026</span>
        
      </div>
    </div>
      <h2 class="title">Pódium Nežetice</h2>
      
      
    <div class="actions">
      <a class="btn" href="https://calendar.google.com/calendar/render?action=TEMPLATE&amp;text=P%C3%B3dium%20Ne%C5%BEetice&amp;dates=20260718/20260719&amp;details=&amp;location=Ne%C5%BEetice&amp;sf=true&amp;output=xml" target="_blank" rel="noopener">
        <span class="ico">🗓️</span> Přidat do Google kalendáře
      </a>
      <a class="btn" href="data:text/calendar;charset=utf-8,BEGIN%3AVCALENDAR%0D%0AVERSION%3A2.0%0D%0APRODID%3A-%2F%2FMKS%20Events%2F%2FCZ%0D%0ACALSCALE%3AGREGORIAN%0D%0AMETHOD%3APUBLISH%0D%0ABEGIN%3AVEVENT%0D%0AUID%3AgzYP6ZjBCRs8jBi0Emuxb3%2F0%40mks-events%0D%0ADTSTAMP%3A20251014T114134Z%0D%0ASUMMARY%3AP%C3%B3dium%20Ne%C5%BEetice%0D%0ADTSTART%3BVALUE%3DDATE%3A20260718%0D%0ADTEND%3BVALUE%3DDATE%3A20260719%0D%0ALOCATION%3ANe%C5%BEetice%0D%0AEND%3AVEVENT%0D%0AEND%3AVCALENDAR%0D%0A" download="2026-07-18-podium-nezetice.ics">
        <span class="ico">🍎</span> Přidat do Apple kalendáře
      </a>
    </div>
    </div>
  </article></div>
    <div id="load-more-sentinel" style="height:1px"></div>
  </div>

  <div class="lightbox" id="lightbox" aria-hidden="true"><img id="lightbox-img" alt=""></div>

<script>
window.__REST_EVENTS = [];

/* utils */
function h(s){return String(s||'').replace(/[&<>]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;'}[c]))}
function ha(s){return h(s).replace(/"/g,'&quot;')}
function slugify(s){return (s||'').normalize('NFD').replace(/[\u0300-\u036f]/g,'').toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'')||'akce'}

/* klientské vykreslení karty */
function renderCardHTML(d){
  var media = d.image? '<div class="media"><div class="poster-wrap"><img class="poster" loading="lazy" decoding="async" src="'+ha(d.image)+'" alt=""></div></div>' : '';
  var left  = (d.location? '<span class="item">📍 '+h(d.location)+'</span>' : '');
  var right = '<span class="badge">📅 '+h(d.dateBadge)+'</span>' + (d.showTime? ' <span class="badge">⏰ '+h(d.timeText)+'</span>' : '');
  var meta  = '<div class="meta"><div class="meta-left">'+ left +'</div><div class="meta-right">'+ right +'</div></div>';
  var title = '<h2 class="title">'+h(d.title)+'</h2>';
  var desc  = d.details? '<div class="desc">'+h(d.details)+'</div>' : '';

  return '<article class="card" data-calendar="'+ha(d.calendar)+'">'+
           media+
           '<div class="body">'+
             meta + title + desc +
             '<div class="actions">'+
               '<a class="btn" href="'+ha(d.gcalUrl)+'" target="_blank" rel="noopener"><span class="ico">🗓️</span> Přidat do Google kalendáře</a>'+
               '<a class="btn" href="'+ha(d.icsDataUri)+'" download="'+ha(slugify(d.title))+'.ics"><span class="ico">🍎</span> Přidat do Apple kalendáře</a>'+
             '</div>'+
           '</div>'+
         '</article>';
}

/* iFrame resize */
function sendHeight(){var h=document.body.scrollHeight; parent&&parent.postMessage&&parent.postMessage({type:'resize-iframe',height:h},'*');}
window.addEventListener('load',sendHeight);window.addEventListener('resize',sendHeight);setTimeout(sendHeight,300);

/* Lightbox */
(function(){var box=document.getElementById('lightbox'),img=document.getElementById('lightbox-img');
  document.addEventListener('click',function(e){var t=e.target;
    if(t&&t.tagName==='IMG'&&t.classList.contains('poster')){img.src=t.currentSrc||t.src;box.classList.add('open');box.setAttribute('aria-hidden','false');e.preventDefault();}
    else if(t===box){box.classList.remove('open');box.setAttribute('aria-hidden','true');img.src='';}
  });
  document.addEventListener('keydown',function(e){if(e.key==='Escape'){box.classList.remove('open');box.setAttribute('aria-hidden','true');img.src='';}});
})();

/* fallback: když se obrázek nenačte */
document.addEventListener('error',function(e){
  var t=e.target; if(t&&t.tagName==='IMG'&&t.classList.contains('poster')){
    var wrap=t.closest('.media'); if(wrap) wrap.style.display='none'; sendHeight();
  }
},true);

/* Lazy render */
(function(){
  var data = Array.isArray(window.__REST_EVENTS)? window.__REST_EVENTS.slice():[];
  if(!data.length) return;
  var grid = document.getElementById('grid');
  var sent = document.getElementById('load-more-sentinel');
  var CHUNK = 6;

  function appendChunk(){
    var part=data.splice(0,CHUNK); if(!part.length) return;
    var html=part.map(renderCardHTML).join(''); var tmp=document.createElement('div'); tmp.innerHTML=html;
    while(tmp.firstChild) grid.appendChild(tmp.firstChild);
    sendHeight();
  }
  appendChunk();
  var io=new IntersectionObserver(function(es){
    es.forEach(function(ent){ if(ent.isIntersecting){ appendChunk(); if(!data.length){ io.disconnect(); sent.remove(); } } });
  },{root:null,rootMargin:'600px 0px',threshold:0});
  io.observe(sent);
})();
</script>
</body></html>