<!DOCTYPE html>
<html lang="cs"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Program akcÃ­</title><meta name="color-scheme" content="light dark">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box}
body{ margin:0;padding:16px;background:linear-gradient(180deg,#fff6f2,#fff0ec);
      color:#222;font:16px/1.7 "Inter",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu }
.wrapper{max-width:980px;margin:0 auto}
.grid{display:grid;gap:16px;grid-template-columns:1fr}

/* karta */
.card{
  display:flex; flex-direction:row; gap:18px;
  align-items:stretch;
  background:#fff; border-radius:16px; padding:18px;
  box-shadow:0 6px 24px rgba(0,0,0,.08); border-left:8px solid var(--bar,#f4a261);
  transition: transform .15s ease, box-shadow .2s ease;
}
.card:hover{ transform:translateY(-2px); box-shadow:0 10px 30px rgba(0,0,0,.12); }

/* levÃ½ sloupec s plakÃ¡tem */
.media{ flex:0 0 340px; max-width:340px; align-self:flex-start; }
.poster-wrap{ background:#fff; border-radius:12px; overflow:hidden; border:1px solid rgba(0,0,0,.06);
              box-shadow:0 4px 12px rgba(0,0,0,.06); cursor: zoom-in; }
.poster{ display:block; width:100%; height:auto; max-height:640px;
         transition: transform .3s ease, filter .3s ease; }
.card:hover .poster{ transform:scale(1.03); filter:brightness(1.05); }

/* pravÃ½ sloupec */
.body{flex:1; min-width:0; display:flex; flex-direction:column;}
.title{margin:0; font-size:26px; line-height:1.25; font-weight:700; color:#202225; padding-bottom:10px}
.meta{ display:flex; flex-wrap:wrap; gap:8px 10px; align-items:center; padding:10px 0 }
.badge{ display:inline-block; background:#f5f6fa; color:#3d4051; border-radius:6px; padding:4px 10px; font-size:14px; font-weight:600; }
.meta .item{ color:#555; font-size:15px; }
.desc{ color:#2a2d3a; font-size:17px; padding:10px 0 }

/* Å¡edÃ© oddÄ›lovaÄe mezi sekcemi */
.divider{ height:1px; background:#e8e8ee; border:0; margin:0 } /* linka bez svislÃ½ch mezer */
/* akce dole */
.actions{
  margin-top:auto;
  display:flex; flex-wrap:wrap; gap:10px; justify-content:center; width:100%;
  padding-top:12px; /* odstup od poslednÃ­ ÄÃ¡ry */
}
.btn{ display:inline-flex; align-items:center; gap:8px; border:1px solid rgba(0,0,0,.1); background:#fff;
      padding:8px 12px; border-radius:10px; font-weight:600; font-size:14px; box-shadow:0 2px 8px rgba(0,0,0,.04);
      cursor:pointer; text-decoration:none; color:#1a1f36; }
.btn:hover{ box-shadow:0 6px 18px rgba(0,0,0,.10) }
.btn .ico{ font-size:16px }

/* barvy podle kalendÃ¡Å™e */
.card[data-calendar*="KD"]{ --bar:#e76f51; }
.card[data-calendar*="Hamr"]{ --bar:#2a9d8f; }
.card[data-calendar*="TaneÄnÃ­"]{ --bar:#e9c46a; }
.card[data-calendar*="Sviny"]{ --bar:#264653; }

/* LIGHTBOX */
.lightbox{ position:fixed; inset:0; background:rgba(0,0,0,.85); display:none; align-items:center; justify-content:center; z-index:9999; }
.lightbox.open{ display:flex }
.lightbox img{ max-width:94vw; max-height:94vh; box-shadow:0 10px 40px rgba(0,0,0,.5); border-radius:12px }

/* responsivnÃ­ */
@media (max-width:740px){
  .card{flex-direction:column}
  .media{flex:unset; max-width:100%}
  .poster{max-height:70vh}
}

/* dark mode */
@media (prefers-color-scheme:dark){
  body{background:#0b0b10; color:#e9e9f1}
  .card{background:#12121a; box-shadow:0 6px 30px rgba(0,0,0,.35)}
  .poster-wrap{border-color:rgba(255,255,255,.08); background:#0c0c12}
  .badge{background:#1b1c26; color:#e3e6f0}
  .meta .item{color:#acafbd}
  .desc{color:#dfe3ee}
  .divider{background:#2a2d38}
  .btn{ background:#151823; color:#e8ecf6; border-color:#20253a }
}
a{color:#0b69d7; text-decoration:none} a:hover{text-decoration:underline}
</style>
<script type="application/ld+json">
[
{
  "@context": "https://schema.org",
  "@type": "Event",
  "name": "Lorem ipsum dolor sit amet, consectetur adipiscing elit",
  "startDate": "2025-10-13T12:00:00+02:00",
  "endDate": "2025-10-13T13:00:00+02:00",
  "description": "Zveme VÃ¡s na podzimnÃ­ turistickÃ½ pochod krajinou Trhovosvinenska. TÄ›Å¡te se na tÅ™i trasy - 9 km, 20 km a 36 km. Start v KulturnÃ­m a informaÄnÃ­m centru, Å½iÅ¾kovo nÃ¡m. 40, od 8:00 - 10:00 hodin. CÃ­l na BuÅ¡kovÄ› hamru od 11 - 17 hodin. \nStartovnÃ© 200 KÄ\nRegistrace na strÃ¡nkÃ¡ch www.kulturavesvinech.cz nebo v KulturnÃ­m informaÄnÃ­m centru (tel.: 386 301 488, e-mail: kic@tsviny.cz)"
}
{
  "@context": "https://schema.org",
  "@type": "Event",
  "name": "ZÅ  - natÃ¡ÄenÃ­",
  "startDate": "2025-10-20T12:00:00+02:00",
  "endDate": "2025-10-20T13:00:00+02:00",
  "description": "Koncert hudebnÃ­ho uskupenÃ­ Å½estÄ› dvÄ›stÄ›."
}
{
  "@context": "https://schema.org",
  "@type": "Event",
  "name": "Zastupitelstvo",
  "startDate": "2025-11-17T17:00:00+01:00",
  "endDate": "2025-11-17T19:00:00+01:00",
  "description": ""
}
{
  "@context": "https://schema.org",
  "@type": "Event",
  "name": "Od hospody k hospodÄ› V",
  "startDate": "2025-12-11T18:00:00+01:00",
  "endDate": "2025-12-11T20:00:00+01:00",
  "description": "cca 25 lidÃ­",
  "location": {
    "@type": "Place",
    "name": "SÃ¡l KD"
  }
}
{
  "@context": "https://schema.org",
  "@type": "Event",
  "name": "ZÅ  - pÅ™edÃ¡vÃ¡nÃ­ vysvÄ›dÄenÃ­",
  "startDate": "2026-06-29T17:00:00+02:00",
  "endDate": "2026-06-29T19:00:00+02:00",
  "description": ""
}
{
  "@context": "https://schema.org",
  "@type": "Event",
  "name": "PÃ³dium NeÅ¾etice",
  "startDate": "2026-07-18",
  "endDate": "2026-07-18",
  "description": "",
  "location": {
    "@type": "Place",
    "name": "NeÅ¾etice"
  }
}
]
</script>
</head>
<body>
  <div class="wrapper">
    <div class="grid" id="grid"><article class="card" data-calendar="TaneÄnÃ­ sÃ¡l">
    
    <div class="body">
      <h2 class="title">Lorem ipsum dolor sit amet, consectetur adipiscing elit</h2>
      <hr class="divider">
      <div class="meta">
        <span class="badge">ğŸ“… 13.10.2025</span>
        <span class="badge">â° 12:00 â€“ 13:00</span>
        
        <span class="item">ğŸ—‚ï¸ TaneÄnÃ­ sÃ¡l</span>
      </div>
      <hr class="divider">
      <div class="desc">Zveme VÃ¡s na podzimnÃ­ turistickÃ½ pochod krajinou Trhovosvinenska. TÄ›Å¡te se na tÅ™i trasy - 9 km, 20 km a 36 km. Start v KulturnÃ­m a informaÄnÃ­m centru, Å½iÅ¾kovo nÃ¡m. 40, od 8:00 - 10:00 hodin. CÃ­l na BuÅ¡kovÄ› hamru od 11 - 17 hodin. 
StartovnÃ© 200 KÄ
Registrace na strÃ¡nkÃ¡ch www.kulturavesvinech.cz nebo v KulturnÃ­m informaÄnÃ­m centru (tel.: 386 301 488, e-mail: kic@tsviny.cz)</div><hr class="divider">
      
    <div class="actions">
      <a class="btn" href="https://calendar.google.com/calendar/render?action=TEMPLATE&amp;text=Lorem%20ipsum%20dolor%20sit%20amet%2C%20consectetur%20adipiscing%20elit&amp;dates=20251013T100000Z/20251013T110000Z&amp;details=Zveme%20V%C3%A1s%20na%20podzimn%C3%AD%20turistick%C3%BD%20pochod%20krajinou%20Trhovosvinenska.%20T%C4%9B%C5%A1te%20se%20na%20t%C5%99i%20trasy%20-%209%20km%2C%2020%20km%20a%2036%20km.%20Start%20v%20Kulturn%C3%ADm%20a%20informa%C4%8Dn%C3%ADm%20centru%2C%20%C5%BDi%C5%BEkovo%20n%C3%A1m.%2040%2C%20od%208%3A00%20-%2010%3A00%20hodin.%20C%C3%ADl%20na%20Bu%C5%A1kov%C4%9B%20hamru%20od%2011%20-%2017%20hodin.%20%0AStartovn%C3%A9%20200%20K%C4%8D%0ARegistrace%20na%20str%C3%A1nk%C3%A1ch%20www.kulturavesvinech.cz%20nebo%20v%20Kulturn%C3%ADm%20informa%C4%8Dn%C3%ADm%20centru%20(tel.%3A%20386%20301%20488%2C%20e-mail%3A%20kic%40tsviny.cz)&amp;location=&amp;sf=true&amp;output=xml" target="_blank" rel="noopener">
        <span class="ico">ğŸ—“ï¸</span> PÅ™idat do Google kalendÃ¡Å™e
      </a>
      <a class="btn" href="data:text/calendar;charset=utf-8,BEGIN%3AVCALENDAR%0D%0AVERSION%3A2.0%0D%0APRODID%3A-%2F%2FMKS%20Events%2F%2FCZ%0D%0ACALSCALE%3AGREGORIAN%0D%0AMETHOD%3APUBLISH%0D%0ABEGIN%3AVEVENT%0D%0AUID%3Au9ntWTyhCBMzDtBr7a2ftpcn%40mks-events%0D%0ADTSTAMP%3A20251013T202009Z%0D%0ASUMMARY%3ALorem%20ipsum%20dolor%20sit%20amet%5C%2C%20consectetur%20adipiscing%20elit%0D%0ADTSTART%3A20251013T100000Z%0D%0ADTEND%3A20251013T110000Z%0D%0ADESCRIPTION%3AZveme%20V%C3%A1s%20na%20podzimn%C3%AD%20turistick%C3%BD%20pochod%20krajinou%20Trhovosvinenska.%20T%C4%9B%C5%A1te%20se%20na%20t%C5%99i%20trasy%20-%209%20km%5C%2C%2020%20km%20a%2036%20km.%20Start%20v%20Kulturn%C3%ADm%20a%20informa%C4%8Dn%C3%ADm%20centru%5C%2C%20%C5%BDi%C5%BEkovo%20n%C3%A1m.%2040%5C%2C%20od%208%3A00%20-%2010%3A00%20hodin.%20C%C3%ADl%20na%20Bu%C5%A1kov%C4%9B%20hamru%20od%2011%20-%2017%20hodin.%20%5CnStartovn%C3%A9%20200%20K%C4%8D%5CnRegistrace%20na%20str%C3%A1nk%C3%A1ch%20www.kulturavesvinech.cz%20nebo%20v%20Kulturn%C3%ADm%20informa%C4%8Dn%C3%ADm%20centru%20(tel.%3A%20386%20301%20488%5C%2C%20e-mail%3A%20kic%40tsviny.cz)%0D%0AEND%3AVEVENT%0D%0AEND%3AVCALENDAR%0D%0A" download="2025-10-13-lorem-ipsum-dolor-sit-amet-consectetur-adipiscing-elit.ics">
        <span class="ico">ğŸ</span> PÅ™idat do Apple kalendÃ¡Å™e
      </a>
    </div>
    </div>
  </article><article class="card" data-calendar="KulturnÃ­ dÅ¯m">
    <div class="media"><div class="poster-wrap"><img class="poster" loading="lazy" decoding="async" src="/img/2025-10-20-zs-nataceni.png" alt=""></div></div>
    <div class="body">
      <h2 class="title">ZÅ  - natÃ¡ÄenÃ­</h2>
      <hr class="divider">
      <div class="meta">
        <span class="badge">ğŸ“… 20.10.2025</span>
        <span class="badge">â° 12:00 â€“ 13:00</span>
        
        <span class="item">ğŸ—‚ï¸ KulturnÃ­ dÅ¯m</span>
      </div>
      <hr class="divider">
      <div class="desc">Koncert hudebnÃ­ho uskupenÃ­ Å½estÄ› dvÄ›stÄ›.</div><hr class="divider">
      
    <div class="actions">
      <a class="btn" href="https://calendar.google.com/calendar/render?action=TEMPLATE&amp;text=Z%C5%A0%20-%20nat%C3%A1%C4%8Den%C3%AD&amp;dates=20251020T100000Z/20251020T110000Z&amp;details=Koncert%20hudebn%C3%ADho%20uskupen%C3%AD%20%C5%BDest%C4%9B%20dv%C4%9Bst%C4%9B.&amp;location=&amp;sf=true&amp;output=xml" target="_blank" rel="noopener">
        <span class="ico">ğŸ—“ï¸</span> PÅ™idat do Google kalendÃ¡Å™e
      </a>
      <a class="btn" href="data:text/calendar;charset=utf-8,BEGIN%3AVCALENDAR%0D%0AVERSION%3A2.0%0D%0APRODID%3A-%2F%2FMKS%20Events%2F%2FCZ%0D%0ACALSCALE%3AGREGORIAN%0D%0AMETHOD%3APUBLISH%0D%0ABEGIN%3AVEVENT%0D%0AUID%3Akc8Kpw3aKDYMJZ5YaK1%2FXQOe%40mks-events%0D%0ADTSTAMP%3A20251013T202009Z%0D%0ASUMMARY%3AZ%C5%A0%20-%20nat%C3%A1%C4%8Den%C3%AD%0D%0ADTSTART%3A20251020T100000Z%0D%0ADTEND%3A20251020T110000Z%0D%0ADESCRIPTION%3AKoncert%20hudebn%C3%ADho%20uskupen%C3%AD%20%C5%BDest%C4%9B%20dv%C4%9Bst%C4%9B.%0D%0AEND%3AVEVENT%0D%0AEND%3AVCALENDAR%0D%0A" download="2025-10-20-zs-nataceni.ics">
        <span class="ico">ğŸ</span> PÅ™idat do Apple kalendÃ¡Å™e
      </a>
    </div>
    </div>
  </article><article class="card" data-calendar="TaneÄnÃ­ sÃ¡l">
    <div class="media"><div class="poster-wrap"><img class="poster" loading="lazy" decoding="async" src="/img/2025-11-17-zastupitelstvo.jpg" alt=""></div></div>
    <div class="body">
      <h2 class="title">Zastupitelstvo</h2>
      <hr class="divider">
      <div class="meta">
        <span class="badge">ğŸ“… 17.11.2025</span>
        <span class="badge">â° 17:00 â€“ 19:00</span>
        
        <span class="item">ğŸ—‚ï¸ TaneÄnÃ­ sÃ¡l</span>
      </div>
      <hr class="divider">
      
      
    <div class="actions">
      <a class="btn" href="https://calendar.google.com/calendar/render?action=TEMPLATE&amp;text=Zastupitelstvo&amp;dates=20251117T160000Z/20251117T180000Z&amp;details=&amp;location=&amp;sf=true&amp;output=xml" target="_blank" rel="noopener">
        <span class="ico">ğŸ—“ï¸</span> PÅ™idat do Google kalendÃ¡Å™e
      </a>
      <a class="btn" href="data:text/calendar;charset=utf-8,BEGIN%3AVCALENDAR%0D%0AVERSION%3A2.0%0D%0APRODID%3A-%2F%2FMKS%20Events%2F%2FCZ%0D%0ACALSCALE%3AGREGORIAN%0D%0AMETHOD%3APUBLISH%0D%0ABEGIN%3AVEVENT%0D%0AUID%3AoWAXio78qQ2BSoc5t3X1dePn%40mks-events%0D%0ADTSTAMP%3A20251013T202010Z%0D%0ASUMMARY%3AZastupitelstvo%0D%0ADTSTART%3A20251117T160000Z%0D%0ADTEND%3A20251117T180000Z%0D%0AEND%3AVEVENT%0D%0AEND%3AVCALENDAR%0D%0A" download="2025-11-17-zastupitelstvo.ics">
        <span class="ico">ğŸ</span> PÅ™idat do Apple kalendÃ¡Å™e
      </a>
    </div>
    </div>
  </article><article class="card" data-calendar="TaneÄnÃ­ sÃ¡l">
    <div class="media"><div class="poster-wrap"><img class="poster" loading="lazy" decoding="async" src="/img/2025-12-11-od-hospody-k-hospode-v.png" alt=""></div></div>
    <div class="body">
      <h2 class="title">Od hospody k hospodÄ› V</h2>
      <hr class="divider">
      <div class="meta">
        <span class="badge">ğŸ“… 11.12.2025</span>
        <span class="badge">â° 18:00 â€“ 20:00</span>
        <span class="item">ğŸ“ SÃ¡l KD</span>
        <span class="item">ğŸ—‚ï¸ TaneÄnÃ­ sÃ¡l</span>
      </div>
      <hr class="divider">
      <div class="desc">cca 25 lidÃ­</div><hr class="divider">
      
    <div class="actions">
      <a class="btn" href="https://calendar.google.com/calendar/render?action=TEMPLATE&amp;text=Od%20hospody%20k%20hospod%C4%9B%20V&amp;dates=20251211T170000Z/20251211T190000Z&amp;details=cca%2025%20lid%C3%AD&amp;location=S%C3%A1l%20KD&amp;sf=true&amp;output=xml" target="_blank" rel="noopener">
        <span class="ico">ğŸ—“ï¸</span> PÅ™idat do Google kalendÃ¡Å™e
      </a>
      <a class="btn" href="data:text/calendar;charset=utf-8,BEGIN%3AVCALENDAR%0D%0AVERSION%3A2.0%0D%0APRODID%3A-%2F%2FMKS%20Events%2F%2FCZ%0D%0ACALSCALE%3AGREGORIAN%0D%0AMETHOD%3APUBLISH%0D%0ABEGIN%3AVEVENT%0D%0AUID%3A%2FWXLxwf%2BNqKQOQesUgTIh%2Bp6%40mks-events%0D%0ADTSTAMP%3A20251013T202010Z%0D%0ASUMMARY%3AOd%20hospody%20k%20hospod%C4%9B%20V%0D%0ADTSTART%3A20251211T170000Z%0D%0ADTEND%3A20251211T190000Z%0D%0ALOCATION%3AS%C3%A1l%20KD%0D%0ADESCRIPTION%3Acca%2025%20lid%C3%AD%0D%0AEND%3AVEVENT%0D%0AEND%3AVCALENDAR%0D%0A" download="2025-12-11-od-hospody-k-hospode-v.ics">
        <span class="ico">ğŸ</span> PÅ™idat do Apple kalendÃ¡Å™e
      </a>
    </div>
    </div>
  </article><article class="card" data-calendar="TaneÄnÃ­ sÃ¡l">
    <div class="media"><div class="poster-wrap"><img class="poster" loading="lazy" decoding="async" src="/img/2026-06-29-zs-predavani-vysvedceni.png" alt=""></div></div>
    <div class="body">
      <h2 class="title">ZÅ  - pÅ™edÃ¡vÃ¡nÃ­ vysvÄ›dÄenÃ­</h2>
      <hr class="divider">
      <div class="meta">
        <span class="badge">ğŸ“… 29.6.2026</span>
        <span class="badge">â° 17:00 â€“ 19:00</span>
        
        <span class="item">ğŸ—‚ï¸ TaneÄnÃ­ sÃ¡l</span>
      </div>
      <hr class="divider">
      
      
    <div class="actions">
      <a class="btn" href="https://calendar.google.com/calendar/render?action=TEMPLATE&amp;text=Z%C5%A0%20-%20p%C5%99ed%C3%A1v%C3%A1n%C3%AD%20vysv%C4%9Bd%C4%8Den%C3%AD&amp;dates=20260629T150000Z/20260629T170000Z&amp;details=&amp;location=&amp;sf=true&amp;output=xml" target="_blank" rel="noopener">
        <span class="ico">ğŸ—“ï¸</span> PÅ™idat do Google kalendÃ¡Å™e
      </a>
      <a class="btn" href="data:text/calendar;charset=utf-8,BEGIN%3AVCALENDAR%0D%0AVERSION%3A2.0%0D%0APRODID%3A-%2F%2FMKS%20Events%2F%2FCZ%0D%0ACALSCALE%3AGREGORIAN%0D%0AMETHOD%3APUBLISH%0D%0ABEGIN%3AVEVENT%0D%0AUID%3Ayy0A2g1RyZzRGtYJEJ1QamF%2F%40mks-events%0D%0ADTSTAMP%3A20251013T202006Z%0D%0ASUMMARY%3AZ%C5%A0%20-%20p%C5%99ed%C3%A1v%C3%A1n%C3%AD%20vysv%C4%9Bd%C4%8Den%C3%AD%0D%0ADTSTART%3A20260629T150000Z%0D%0ADTEND%3A20260629T170000Z%0D%0AEND%3AVEVENT%0D%0AEND%3AVCALENDAR%0D%0A" download="2026-06-29-zs-predavani-vysvedceni.ics">
        <span class="ico">ğŸ</span> PÅ™idat do Apple kalendÃ¡Å™e
      </a>
    </div>
    </div>
  </article><article class="card" data-calendar="TrhovÃ© Sviny a okolÃ­">
    
    <div class="body">
      <h2 class="title">PÃ³dium NeÅ¾etice</h2>
      <hr class="divider">
      <div class="meta">
        <span class="badge">ğŸ“… 18.7.2026</span>
        
        <span class="item">ğŸ“ NeÅ¾etice</span>
        <span class="item">ğŸ—‚ï¸ TrhovÃ© Sviny a okolÃ­</span>
      </div>
      <hr class="divider">
      
      
    <div class="actions">
      <a class="btn" href="https://calendar.google.com/calendar/render?action=TEMPLATE&amp;text=P%C3%B3dium%20Ne%C5%BEetice&amp;dates=20260718/20260719&amp;details=&amp;location=Ne%C5%BEetice&amp;sf=true&amp;output=xml" target="_blank" rel="noopener">
        <span class="ico">ğŸ—“ï¸</span> PÅ™idat do Google kalendÃ¡Å™e
      </a>
      <a class="btn" href="data:text/calendar;charset=utf-8,BEGIN%3AVCALENDAR%0D%0AVERSION%3A2.0%0D%0APRODID%3A-%2F%2FMKS%20Events%2F%2FCZ%0D%0ACALSCALE%3AGREGORIAN%0D%0AMETHOD%3APUBLISH%0D%0ABEGIN%3AVEVENT%0D%0AUID%3AgzYP6ZjBCRs8jBi0Emuxb3%2F0%40mks-events%0D%0ADTSTAMP%3A20251013T202008Z%0D%0ASUMMARY%3AP%C3%B3dium%20Ne%C5%BEetice%0D%0ADTSTART%3BVALUE%3DDATE%3A20260718%0D%0ADTEND%3BVALUE%3DDATE%3A20260719%0D%0ALOCATION%3ANe%C5%BEetice%0D%0AEND%3AVEVENT%0D%0AEND%3AVCALENDAR%0D%0A" download="2026-07-18-podium-nezetice.ics">
        <span class="ico">ğŸ</span> PÅ™idat do Apple kalendÃ¡Å™e
      </a>
    </div>
    </div>
  </article></div>
    <div id="load-more-sentinel" style="height:1px"></div>
  </div>

  <div class="lightbox" id="lightbox" aria-hidden="true"><img id="lightbox-img" alt=""></div>

<script>
/* data pro lazy render */
window.__REST_EVENTS = [];

/* util */
function h(s){return String(s||'').replace(/[&<>]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;'}[c]))}
function ha(s){return h(s).replace(/"/g,'&quot;')}
function slugify(s){return (s||'').normalize('NFD').replace(/[\u0300-\u036f]/g,'').toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'')||'akce'}

/* klientskÃ© vykreslenÃ­ karty (se sekÄnÃ­mi ÄÃ¡rami) */
function renderCardHTML(d){
  var media = d.image? '<div class="media"><div class="poster-wrap"><img class="poster" loading="lazy" decoding="async" src="'+ha(d.image)+'" alt=""></div></div>' : '';
  var time  = d.showTime? '<span class="badge">â° '+h(d.timeText)+'</span>' : '';
  var desc  = d.details? '<div class="desc">'+h(d.details)+'</div><hr class="divider">' : '';

  return '<article class="card" data-calendar="'+ha(d.calendar)+'">'+
           media+
           '<div class="body">'+
             '<h2 class="title">'+h(d.title)+'</h2>'+
             '<hr class="divider">'+
             '<div class="meta">'+
               '<span class="badge">ğŸ“… '+h(d.dateBadge)+'</span>'+ time +
               (d.location? '<span class="item">ğŸ“ '+h(d.location)+'</span>':'')+
               (d.calendar? '<span class="item">ğŸ—‚ï¸ '+h(d.calendar)+'</span>':'')+
             '</div>'+
             '<hr class="divider">'+
             desc +
             '<div class="actions">'+
               '<a class="btn" href="'+ha(d.gcalUrl)+'" target="_blank" rel="noopener"><span class="ico">ğŸ—“ï¸</span> PÅ™idat do Google kalendÃ¡Å™e</a>'+
               '<a class="btn" href="'+ha(d.icsDataUri)+'" download="'+ha(slugify(d.title))+'.ics"><span class="ico">ğŸ</span> PÅ™idat do Apple kalendÃ¡Å™e</a>'+
             '</div>'+
           '</div>'+
         '</article>';
}

/* iFrame resize */
function sendHeight(){var h=document.body.scrollHeight; parent&&parent.postMessage&&parent.postMessage({type:'resize-iframe',height:h},'*');}
window.addEventListener('load',sendHeight);window.addEventListener('resize',sendHeight);setTimeout(sendHeight,300);

/* Lightbox */
(function(){var box=document.getElementById('lightbox'),img=document.getElementById('lightbox-img');
  document.addEventListener('click',function(e){var t=e.target;
    if(t&&t.tagName==='IMG'&&t.classList.contains('poster')){img.src=t.currentSrc||t.src;box.classList.add('open');box.setAttribute('aria-hidden','false');e.preventDefault();}
    else if(t===box){box.classList.remove('open');box.setAttribute('aria-hidden','true');img.src='';}
  });
  document.addEventListener('keydown',function(e){if(e.key==='Escape'){box.classList.remove('open');box.setAttribute('aria-hidden','true');img.src='';}});
})();

/* fallback: kdyÅ¾ se obrÃ¡zek nenaÄte */
document.addEventListener('error',function(e){
  var t=e.target; if(t&&t.tagName==='IMG'&&t.classList.contains('poster')){
    var wrap=t.closest('.media'); if(wrap) wrap.style.display='none'; sendHeight();
  }
},true);

/* Lazy render */
(function(){
  var data = Array.isArray(window.__REST_EVENTS)? window.__REST_EVENTS.slice():[];
  if(!data.length) return;
  var grid = document.getElementById('grid');
  var sent = document.getElementById('load-more-sentinel');
  var CHUNK = 6;

  function appendChunk(){
    var part=data.splice(0,CHUNK); if(!part.length) return;
    var html=part.map(renderCardHTML).join(''); var tmp=document.createElement('div'); tmp.innerHTML=html;
    while(tmp.firstChild) grid.appendChild(tmp.firstChild);
    sendHeight();
  }
  appendChunk();
  var io=new IntersectionObserver(function(es){
    es.forEach(function(ent){ if(ent.isIntersecting){ appendChunk(); if(!data.length){ io.disconnect(); sent.remove(); } } });
  },{root:null,rootMargin:'600px 0px',threshold:0});
  io.observe(sent);
})();
</script>
</body></html>